define(["Tone/core/Tone"],function(Tone){"use strict";Tone.Emitter=function(){this._events={}};Tone.extend(Tone.Emitter);Tone.Emitter.prototype.on=function(event,callback){var events=event.split(/\W+/);for(var i=0;i<events.length;i++){var eventName=events[i];if(!this._events.hasOwnProperty(eventName)){this._events[eventName]=[]}
this._events[eventName].push(callback)}
return this};Tone.Emitter.prototype.off=function(event,callback){var events=event.split(/\W+/);for(var ev=0;ev<events.length;ev++){event=events[ev];if(this._events.hasOwnProperty(event)){if(Tone.prototype.isUndef(callback)){this._events[event]=[]}else{var eventList=this._events[event];for(var i=0;i<eventList.length;i++){if(eventList[i]===callback){eventList.splice(i,1)}}}}}
return this};Tone.Emitter.prototype.trigger=function(event){if(this._events){var args=Array.prototype.slice.call(arguments,1);if(this._events.hasOwnProperty(event)){var eventList=this._events[event];for(var i=0,len=eventList.length;i<len;i++){eventList[i].apply(this,args)}}}
return this};Tone.Emitter.mixin=function(object){var functions=["on","off","trigger"];object._events={};for(var i=0;i<functions.length;i++){var func=functions[i];var emitterFunc=Tone.Emitter.prototype[func];object[func]=emitterFunc}};Tone.Emitter.prototype.dispose=function(){Tone.prototype.dispose.call(this);this._events=null;return this};return Tone.Emitter})