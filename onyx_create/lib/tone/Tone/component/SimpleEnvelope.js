define(["Tone/core/Tone","Tone/signal/Signal","Tone/signal/Pow","Tone/core/Type"],function(Tone){"use strict";Tone.SimpleEnvelope=function(){var options=this.optionsObject(arguments,["attack","decay","sustain","release"],Tone.SimpleEnvelope.defaults);this.attack=options.attack;this.decay=options.decay;this.sustain=options.sustain;this.release=options.release;this._minOutput=0.0001;this._sig=this.output=new Tone.Signal();this._sig.setValueAtTime(this._minOutput,0)};Tone.extend(Tone.SimpleEnvelope);Tone.SimpleEnvelope.defaults={"attack":0.01,"decay":0.1,"sustain":0.5,"release":1,};Tone.SimpleEnvelope.prototype.triggerAttack=function(when,velocity){when=this.isUndef(when)?this.context.currentTime:when;velocity=this.isUndef(velocity)?1:velocity;this._sig.cancelScheduledValues(0);this._sig.setValueAtTime(this._sig.value,when);this._sig.linearRampToValueAtTime(velocity,when+this.attack);this._sig.linearRampToValueAtTime(this.sustain*velocity,when+this.attack+this.decay)};Tone.SimpleEnvelope.prototype.triggerRelease=function(when){when=this.isUndef(when)?this.context.currentTime:when;this._sig.cancelScheduledValues(0);this._sig.setValueAtTime(this._sig.value,when);this._sig.linearRampToValueAtTime(this._minOutput,when+this.release)};Tone.SimpleEnvelope.prototype.triggerAttackRelease=function(duration,when,velocity){when=this.isUndef(when)?this.context.currentTime:when;duration=this.isUndef(duration)?0:duration;velocity=this.isUndef(velocity)?1:velocity;this._sig.cancelScheduledValues(0);this._sig.setValueAtTime(this._sig.value,when);this._sig.linearRampToValueAtTime(velocity,when+this.attack);this._sig.linearRampToValueAtTime(this.sustain*velocity,when+this.attack+this.decay)
this._sig.setValueAtTime(this._sig.value,duration+when+this.attack+this.decay);this._sig.linearRampToValueAtTime(this._minOutput,duration+when+this.release+this.attack+this.decay)};Tone.SimpleEnvelope.prototype.connect=Tone.Signal.prototype.connect;Tone.SimpleEnvelope.prototype.dispose=function(){Tone.prototype.dispose.call(this);this._sig.dispose();this._sig=null;return this};return Tone.SimpleEnvelope})